# 对多单项互相配平的算法

这个是目前主要的问题。现在找出单对单看起来问题不大，已经完成了。

单对单的匹配需要注意的是存在一些项目是可以和多项配平的。这些项目需要单独列出进行人工确认。

但是这些也只是清洗数据。如果有存在某种有效的找出多单对多单的算法，那么就可以快速地一次性列出所有的可能的组合，包括单单的情况。

目前没有类似的思路。现在看一下有没有一个穷尽求和匹配的方法。

首先我们有一个单维数列A，长度为$n_a$其中包含了很多项目$X$。 有一个单维数列B，长度为$n_b$其中包含了很多项目$Y$。 现在求A和B的子集匹配，使A的子集的和等于B的子集的和。不能重复使用元素组成子集。



# 新思路 2020-11-06

直接放弃排列组合，可能性太多，不可能实现。

现有的思路是工具辅助人工对账。

其实只要做到两点就可以了

1. 选中任意一项时，在另外一项显示与他配平的项目
2. 让用户可以自由合并和拆分项目

当用户确认配平的时候，选择这些项目，然后试图配平，或者显示差值。

## 对例外项的优化

首先用空项填充例外项以达到平衡的目的 （完成）。

再向单项配平项目搬运被配平项目。

## 完成了初步的草稿项目 版本 1.0.0.1

需要一些代码的优化和去重。

同时需要注意开发一些对用户友好的功能。

### 问题一：配平改变了账目位置

这是因为为了配平采取了行间调换的方法。打乱了原有的顺序。

这样做其实是不好的。因为账目的位置可能存在很多有用的信息，比如是否可以直接组成一组。

### 问题二：同侧相同项配平

这一点如果做的不好的话可能会使运算步骤增加，比如左边对齐了之后还要反过来对一遍，增加代码的复杂性。

还是以公司项目为核心，首先判断同侧是否有相同，往上提，然后才是左侧是否有。这样单笔金额相同的项目就可以形成一个矩形区域。然后再针对这个区域进行填充对齐。

## 对于 1.0.0.2 的展望

### 对齐项规整

希望有一种好办法可以把绝对确认的项目、可能的项目提到整个区域的前面去

### 代码优化

希望可以优化代码，比如，加入一些 Class 进去以提高、提高重复利用率、减少无效代码、优化循环等

### 单元测试

至少要开始规划一些单元测试项目，以减少 Bug。





